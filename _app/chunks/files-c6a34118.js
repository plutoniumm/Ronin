import{C as t,Y as e,Z as s,W as a,S as l,i,s as r,e as o,k as n,t as c,c as d,n as u,a as f,g as h,d as p,b as m,f as g,F as y,L as v,h as $,j as x,l as b,m as S,I as w,_ as E,o as N,v as k,r as I,w as j,T,Q as A,z as _,J as z}from"./vendor-c97387a2.js";import{R as L,s as J}from"./molecular-10497371.js";import{k as O}from"./client_keys-40eee54c.js";/* empty css                                              */import{S as P}from"./svgIcon-524d45bb.js";const U=t({blocks:[{type:"header",data:{text:"New Note",level:1}},{type:"paragraph",data:{text:"Save Something"}}]}),Y=t([]),q=new L(J,"text",{identity:"anonymous"}),F=async()=>{console.log("[Terrelysium] Initialising...");const t=await q.get("/notes/");return console.log("[Terrelysium] Initialised."),Y.set(Q(t)),0},K=async t=>{const e=await q.get("/notes/"+t);return((t,e)=>{const s=document.querySelector("#editorOfNotes");s.dataset.id!==t&&(editor.render(e),s.setAttribute("data-id",t),s.removeAttribute("data-new"))})(t,Q(e)),e},B=t=>K(t.target.dataset.id),C=async(t,e)=>{let s=a(Y);s.find((e=>e.id===t))?(s.find((e=>e.id===t)).title=e.blocks[0].data.text,s.find((e=>e.id===t)).date=e.time):s.push({title:e.blocks[0].data.text,id:t,date:e.time}),Y.set(s);return await q.patch("/notes/"+t,{note:M(e),list:M(a(Y))})},D=async t=>{list=a(Y).filter((e=>e.id!==t)),Y.set(list),console.log(a(Y));const e=await fetch(J+"notes/"+t,{method:"PUT",body:M(a(Y))});await e.json()||console.log("err");const s=document.querySelector("#list input[type=radio]");return s.checked=!0,B({target:{dataset:s}}),0},M=t=>e.encrypt(JSON.stringify(t),O.AES_KEY).toString(),Q=t=>JSON.parse(e.decrypt(t,O.AES_KEY).toString(s));function R(t,e,s){const a=t.slice();return a[5]=e[s],a}function V(t){let e,s,a;return{c(){e=z("circle"),s=n(),a=z("path"),this.h()},l(t){e=d(t,"circle",{cx:!0,cy:!0,r:!0},1),f(e).forEach(p),s=u(t),a=d(t,"path",{d:!0},1),f(a).forEach(p),this.h()},h(){m(e,"cx","14"),m(e,"cy","14"),m(e,"r","12"),m(a,"d","M23 23 L30 30")},m(t,l){g(t,e,l),g(t,s,l),g(t,a,l)},d(t){t&&p(e),t&&p(s),t&&p(a)}}}function W(t){let e,s,a,l,i,r,x,b,S,w,E,N,k=t[5].title+"";return{c(){e=o("input"),l=n(),i=o("label"),r=c(k),x=n(),this.h()},l(t){e=d(t,"INPUT",{type:!0,id:!0,name:!0,value:!0,class:!0}),l=u(t),i=d(t,"LABEL",{class:!0,"data-id":!0,"data-title":!0,for:!0});var s=f(i);r=h(s,k),x=u(s),s.forEach(p),this.h()},h(){m(e,"type","radio"),m(e,"id",s=t[5].id),m(e,"name","noteTitle"),e.value=a=t[5].title,m(e,"class","svelte-1f2zutr"),m(i,"class","note svelte-1f2zutr"),m(i,"data-id",b=t[5].id),m(i,"data-title",S=t[5].title),m(i,"for",w=t[5].id)},m(t,s){g(t,e,s),g(t,l,s),g(t,i,s),y(i,r),y(i,x),E||(N=v(i,"click",B),E=!0)},p(t,l){3&l&&s!==(s=t[5].id)&&m(e,"id",s),3&l&&a!==(a=t[5].title)&&(e.value=a),3&l&&k!==(k=t[5].title+"")&&$(r,k),3&l&&b!==(b=t[5].id)&&m(i,"data-id",b),3&l&&S!==(S=t[5].title)&&m(i,"data-title",S),3&l&&w!==(w=t[5].id)&&m(i,"for",w)},d(t){t&&p(e),t&&p(l),t&&p(i),E=!1,N()}}}function Z(t){let e,s,a,l,i,r,c,h,$;l=new P({props:{style:"flex:1",$$slots:{default:[V]},$$scope:{ctx:t}}});let A=t[1].filter(t[4]),_=[];for(let o=0;o<A.length;o+=1)_[o]=W(R(t,A,o));return{c(){e=o("div"),s=o("input"),a=n(),x(l.$$.fragment),i=n();for(let t=0;t<_.length;t+=1)_[t].c();r=b(),this.h()},l(t){e=d(t,"DIV",{class:!0,style:!0});var o=f(e);s=d(o,"INPUT",{class:!0,placeholder:!0,type:!0}),a=u(o),S(l.$$.fragment,o),o.forEach(p),i=u(t);for(let e=0;e<_.length;e+=1)_[e].l(t);r=b(),this.h()},h(){m(s,"class","newNote svelte-1f2zutr"),m(s,"placeholder","Search..."),m(s,"type","text"),m(e,"class","p-20 flex"),w(e,"border-bottom","1px solid #8882")},m(o,n){g(o,e,n),y(e,s),E(s,t[0]),y(e,a),N(l,e,null),g(o,i,n);for(let t=0;t<_.length;t+=1)_[t].m(o,n);g(o,r,n),c=!0,h||($=v(s,"input",t[3]),h=!0)},p(t,[e]){1&e&&s.value!==t[0]&&E(s,t[0]);const a={};if(256&e&&(a.$$scope={dirty:e,ctx:t}),l.$set(a),3&e){let s;for(A=t[1].filter(t[4]),s=0;s<A.length;s+=1){const a=R(t,A,s);_[s]?_[s].p(a,e):(_[s]=W(a),_[s].c(),_[s].m(r.parentNode,r))}for(;s<_.length;s+=1)_[s].d(1);_.length=A.length}},i(t){c||(k(l.$$.fragment,t),c=!0)},o(t){I(l.$$.fragment,t),c=!1},d(t){t&&p(e),j(l),t&&p(i),T(_,t),t&&p(r),h=!1,$()}}}function G(t,e,s){let a,l;A(t,Y,(t=>s(2,l=t)));let i="";_(F);return t.$$.update=()=>{4&t.$$.dirty&&s(1,a=l)},[i,a,l,function(){i=this.value,s(0,i)},t=>{var e;return null==(e=t.title)?void 0:e.includes(i)}]}class H extends l{constructor(t){super(),i(this,t,G,Z,r,{})}}export{H as F,D as d,U as e,C as u};
