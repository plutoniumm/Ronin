import{C as t,Y as e,Z as s,W as a,S as i,i as r,s as l,e as o,k as n,t as c,c as d,n as f,a as h,g as u,d as p,b as y,f as m,F as g,L as v,h as $,j as x,l as b,m as S,I as w,_ as N,o as E,v as T,r as j,w as k,T as I,Q as L,z as U,J as A}from"./vendor-c97387a2.js";import{k as _}from"./client_keys-40eee54c.js";/* empty css                                              */import{S as z}from"./svgIcon-524d45bb.js";const J=t({blocks:[{type:"header",data:{text:"New Note",level:1}},{type:"paragraph",data:{text:"Save Something"}}]}),O=t([]),P={"Content-Type":"application/json"},R=async()=>{console.log("[Terrelysium] Initialising...");const t=await fetch(serverURL+"notes/"),e=await t.text();return console.log("[Terrelysium] Initialised."),O.set(B(e)),0},C=async t=>{const e=await fetch(serverURL+"notes/"+t),s=await e.text();return((t,e)=>{const s=document.querySelector("#editorOfNotes");s.dataset.id!==t&&(editor.render(e),s.setAttribute("data-id",t),s.removeAttribute("data-new"))})(t,B(s)),s},Y=t=>C(t.target.dataset.id),q=async(t,e)=>{let s=a(O);s.find((e=>e.id===t))?(s.find((e=>e.id===t)).title=e.blocks[0].data.text,s.find((e=>e.id===t)).date=e.time):s.push({title:e.blocks[0].data.text,id:t,date:e.time}),O.set(s);const i=await fetch(serverURL+"notes/"+t,{headers:P,method:"PATCH",body:JSON.stringify({note:K(e),list:K(a(O))})});return(await i.json()).code},F=async t=>{list=a(O).filter((e=>e.id!==t)),O.set(list),console.log(a(O));const e=await fetch(serverURL+"notes/"+t,{method:"PUT",body:K(a(O))});await e.json()||console.log("err");const s=document.querySelector("#list input[type=radio]");return s.checked=!0,Y({target:{dataset:s}}),0},K=t=>e.encrypt(JSON.stringify(t),_.AES_KEY).toString(),B=t=>JSON.parse(e.decrypt(t,_.AES_KEY).toString(s));function D(t,e,s){const a=t.slice();return a[5]=e[s],a}function H(t){let e,s,a;return{c(){e=A("circle"),s=n(),a=A("path"),this.h()},l(t){e=d(t,"circle",{cx:!0,cy:!0,r:!0},1),h(e).forEach(p),s=f(t),a=d(t,"path",{d:!0},1),h(a).forEach(p),this.h()},h(){y(e,"cx","14"),y(e,"cy","14"),y(e,"r","12"),y(a,"d","M23 23 L30 30")},m(t,i){m(t,e,i),m(t,s,i),m(t,a,i)},d(t){t&&p(e),t&&p(s),t&&p(a)}}}function M(t){let e,s,a,i,r,l,x,b,S,w,N,E,T=t[5].title+"";return{c(){e=o("input"),i=n(),r=o("label"),l=c(T),x=n(),this.h()},l(t){e=d(t,"INPUT",{type:!0,id:!0,name:!0,value:!0,class:!0}),i=f(t),r=d(t,"LABEL",{class:!0,"data-id":!0,"data-title":!0,for:!0});var s=h(r);l=u(s,T),x=f(s),s.forEach(p),this.h()},h(){y(e,"type","radio"),y(e,"id",s=t[5].id),y(e,"name","noteTitle"),e.value=a=t[5].title,y(e,"class","svelte-1f2zutr"),y(r,"class","note svelte-1f2zutr"),y(r,"data-id",b=t[5].id),y(r,"data-title",S=t[5].title),y(r,"for",w=t[5].id)},m(t,s){m(t,e,s),m(t,i,s),m(t,r,s),g(r,l),g(r,x),N||(E=v(r,"click",Y),N=!0)},p(t,i){3&i&&s!==(s=t[5].id)&&y(e,"id",s),3&i&&a!==(a=t[5].title)&&(e.value=a),3&i&&T!==(T=t[5].title+"")&&$(l,T),3&i&&b!==(b=t[5].id)&&y(r,"data-id",b),3&i&&S!==(S=t[5].title)&&y(r,"data-title",S),3&i&&w!==(w=t[5].id)&&y(r,"for",w)},d(t){t&&p(e),t&&p(i),t&&p(r),N=!1,E()}}}function Q(t){let e,s,a,i,r,l,c,u,$;i=new z({props:{style:"flex:1",$$slots:{default:[H]},$$scope:{ctx:t}}});let L=t[1].filter(t[4]),U=[];for(let o=0;o<L.length;o+=1)U[o]=M(D(t,L,o));return{c(){e=o("div"),s=o("input"),a=n(),x(i.$$.fragment),r=n();for(let t=0;t<U.length;t+=1)U[t].c();l=b(),this.h()},l(t){e=d(t,"DIV",{class:!0,style:!0});var o=h(e);s=d(o,"INPUT",{class:!0,placeholder:!0,type:!0}),a=f(o),S(i.$$.fragment,o),o.forEach(p),r=f(t);for(let e=0;e<U.length;e+=1)U[e].l(t);l=b(),this.h()},h(){y(s,"class","newNote svelte-1f2zutr"),y(s,"placeholder","Search..."),y(s,"type","text"),y(e,"class","p-20 flex"),w(e,"border-bottom","1px solid #8882")},m(o,n){m(o,e,n),g(e,s),N(s,t[0]),g(e,a),E(i,e,null),m(o,r,n);for(let t=0;t<U.length;t+=1)U[t].m(o,n);m(o,l,n),c=!0,u||($=v(s,"input",t[3]),u=!0)},p(t,[e]){1&e&&s.value!==t[0]&&N(s,t[0]);const a={};if(256&e&&(a.$$scope={dirty:e,ctx:t}),i.$set(a),3&e){let s;for(L=t[1].filter(t[4]),s=0;s<L.length;s+=1){const a=D(t,L,s);U[s]?U[s].p(a,e):(U[s]=M(a),U[s].c(),U[s].m(l.parentNode,l))}for(;s<U.length;s+=1)U[s].d(1);U.length=L.length}},i(t){c||(T(i.$$.fragment,t),c=!0)},o(t){j(i.$$.fragment,t),c=!1},d(t){t&&p(e),k(i),t&&p(r),I(U,t),t&&p(l),u=!1,$()}}}function V(t,e,s){let a,i;L(t,O,(t=>s(2,i=t)));let r="";U(R);return t.$$.update=()=>{4&t.$$.dirty&&s(1,a=i)},[r,a,i,function(){r=this.value,s(0,r)},t=>{var e;return null==(e=t.title)?void 0:e.includes(r)}]}class W extends i{constructor(t){super(),r(this,t,V,Q,l,{})}}export{W as F,F as d,J as e,q as u};
