import{C as t,Z as e,_ as a,V as s,S as i,i as l,s as r,e as n,k as o,t as c,c as d,n as f,a as u,g as h,d as p,b as m,f as g,F as y,I as $,h as v,j as x,l as b,m as S,J as w,$ as E,o as N,v as k,r as I,w as j,P as A,M as T,z,U as _}from"./vendor-0140e8f9.js";import{R as J,s as L}from"./molecular-c58642ff.js";import{k as O}from"./client_keys-40eee54c.js";import{S as P}from"./svgIcon-ba3b8d42.js";const U=t({blocks:[{type:"header",data:{text:"New Note",level:1}},{type:"paragraph",data:{text:"Save Something"}}]}),F=t([]),K=new J(L,"text",{identity:"anonymous"}),M=async()=>{console.log("[Terrelysium] Initialising...");const t=await K.get("/notes/");return console.log("[Terrelysium] Initialised."),F.set(R(t)),0},V=async t=>{const e=await K.get("/notes/"+t);return((t,e)=>{const a=Æ’("#editorOfNotes");a.dataset.id!==t&&(editor.render(e),a.setAttribute("data-id",t),a.removeAttribute("data-new"))})(t,R(e)),e},Y=t=>V(t.target.dataset.id),B=async(t,e)=>{let a=s(F);e&&(a.find((e=>e.id===t))?(a.find((e=>e.id===t)).title=e.blocks[0].data.text,a.find((e=>e.id===t)).date=e.time):a.push({title:e.blocks[0].data.text,id:t,date:e.time})),F.set(a);return await K.patch("/notes/"+t,{note:e?D(e):"",list:D(s(F))})},C=async t=>{list=s(F).filter((e=>e.id!==t)),F.set(list),B(t,"");const e=Æ’("#list input[type=radio]");return e.checked=!0,Y({target:{dataset:e}}),0},D=t=>e.encrypt(JSON.stringify(t),O.AES_KEY).toString(),R=t=>JSON.parse(e.decrypt(t,O.AES_KEY).toString(a));function Z(t,e,a){const s=t.slice();return s[5]=e[a],s}function q(t){let e,a,s;return{c(){e=_("circle"),a=o(),s=_("path"),this.h()},l(t){e=d(t,"circle",{cx:!0,cy:!0,r:!0},1),u(e).forEach(p),a=f(t),s=d(t,"path",{d:!0},1),u(s).forEach(p),this.h()},h(){m(e,"cx","14"),m(e,"cy","14"),m(e,"r","12"),m(s,"d","M23 23 L30 30")},m(t,i){g(t,e,i),g(t,a,i),g(t,s,i)},d(t){t&&p(e),t&&p(a),t&&p(s)}}}function G(t){let e,a,s,i,l,r,x,b,S,w,E,N,k=t[5].title+"";return{c(){e=n("input"),i=o(),l=n("label"),r=c(k),x=o(),this.h()},l(t){e=d(t,"INPUT",{type:!0,id:!0,name:!0,value:!0,class:!0}),i=f(t),l=d(t,"LABEL",{class:!0,"data-id":!0,"data-title":!0,for:!0});var a=u(l);r=h(a,k),x=f(a),a.forEach(p),this.h()},h(){m(e,"type","radio"),m(e,"id",a=t[5].id),m(e,"name","noteTitle"),e.value=s=t[5].title,m(e,"class","svelte-1f2zutr"),m(l,"class","note svelte-1f2zutr"),m(l,"data-id",b=t[5].id),m(l,"data-title",S=t[5].title),m(l,"for",w=t[5].id)},m(t,a){g(t,e,a),g(t,i,a),g(t,l,a),y(l,r),y(l,x),E||(N=$(l,"click",Y),E=!0)},p(t,i){3&i&&a!==(a=t[5].id)&&m(e,"id",a),3&i&&s!==(s=t[5].title)&&(e.value=s),3&i&&k!==(k=t[5].title+"")&&v(r,k),3&i&&b!==(b=t[5].id)&&m(l,"data-id",b),3&i&&S!==(S=t[5].title)&&m(l,"data-title",S),3&i&&w!==(w=t[5].id)&&m(l,"for",w)},d(t){t&&p(e),t&&p(i),t&&p(l),E=!1,N()}}}function H(t){let e,a,s,i,l,r,c,h,v;i=new P({props:{style:"flex:1",$$slots:{default:[q]},$$scope:{ctx:t}}});let T=t[1].filter(t[4]),z=[];for(let n=0;n<T.length;n+=1)z[n]=G(Z(t,T,n));return{c(){e=n("div"),a=n("input"),s=o(),x(i.$$.fragment),l=o();for(let t=0;t<z.length;t+=1)z[t].c();r=b(),this.h()},l(t){e=d(t,"DIV",{class:!0,style:!0});var n=u(e);a=d(n,"INPUT",{class:!0,placeholder:!0,type:!0}),s=f(n),S(i.$$.fragment,n),n.forEach(p),l=f(t);for(let e=0;e<z.length;e+=1)z[e].l(t);r=b(),this.h()},h(){m(a,"class","newNote svelte-1f2zutr"),m(a,"placeholder","Search..."),m(a,"type","text"),m(e,"class","â¬› ðŸ’ª"),w(e,"border-bottom","1px solid #8882")},m(n,o){g(n,e,o),y(e,a),E(a,t[0]),y(e,s),N(i,e,null),g(n,l,o);for(let t=0;t<z.length;t+=1)z[t].m(n,o);g(n,r,o),c=!0,h||(v=$(a,"input",t[3]),h=!0)},p(t,[e]){1&e&&a.value!==t[0]&&E(a,t[0]);const s={};if(256&e&&(s.$$scope={dirty:e,ctx:t}),i.$set(s),3&e){let a;for(T=t[1].filter(t[4]),a=0;a<T.length;a+=1){const s=Z(t,T,a);z[a]?z[a].p(s,e):(z[a]=G(s),z[a].c(),z[a].m(r.parentNode,r))}for(;a<z.length;a+=1)z[a].d(1);z.length=T.length}},i(t){c||(k(i.$$.fragment,t),c=!0)},o(t){I(i.$$.fragment,t),c=!1},d(t){t&&p(e),j(i),t&&p(l),A(z,t),t&&p(r),h=!1,v()}}}function Q(t,e,a){let s,i;T(t,F,(t=>a(2,i=t)));let l="";z(M);return t.$$.update=()=>{4&t.$$.dirty&&a(1,s=i)},[l,s,i,function(){l=this.value,a(0,l)},t=>{var e;return null==(e=t.title)?void 0:e.includes(l)}]}class W extends i{constructor(t){super(),l(this,t,Q,H,r,{})}}export{W as F,C as d,U as e,B as u};
